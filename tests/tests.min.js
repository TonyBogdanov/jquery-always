!function(e,a){"use strict";var t,n,s,o,r,i,l,c;e=e&&e.hasOwnProperty("default")?e.default:e,a=a&&a.hasOwnProperty("default")?a.default:a,t=e,n=a.assert,l=function(){function e(e){this.invoked=0,this.callback=e}return e.prototype.invoke=function(){this.callback.apply(this,arguments),this.invoked++},e.prototype.getInvoked=function(){return this.invoked},e}(),c=function(){function e(){}return e.createCallbacks=function(){return{a:new l(function(){}),b:new l(function(){}),div:new l(function(){})}},e.invokeCallbacks=function(e){return function(){e[this.tagName.toLowerCase()].invoke()}},e.assertInvoked=function(e,a,t,s,o){n.equal(e.a.getInvoked(),a,(o?o+": ":"")+"Callback #a must be invoked "+a+" time(s) total"),n.equal(e.b.getInvoked(),t,(o?o+": ":"")+"Callback #b must be invoked "+t+" time(s) total"),n.equal(e.div.getInvoked(),s,(o?o+": ":"")+"Callback #div must be invoked "+s+" time(s) total")},e.wait=function(a,t){a<=0?t():setTimeout(function(){e.wait(a-1,t)},1)},e}(),beforeEach(function(){s=t("<div/>"),o=t("<a/>"),r=t("<b/>"),i=t("<div/>"),t(document.body).append(s)}),afterEach(function(){s.remove()}),describe("jQuery.Always",function(){it("Dependencies have resolved",function(){var e=typeof window.MutationObserver,a=typeof window.WebKitMutationObserver;n.isTrue("undefined"!==e||"undefined"!==a,"Browser must support mutation observer feature, typeof MutationObserver is "+e+", typeof WebKitMutationObserver is "+a)}),it("Plugin has registered",function(){n.isFunction(t.fn.always,"always() must be registered with jQuery"),n.isFunction(t.fn.never,"never() must be registered with jQuery")}),it('"Inserted" callbacks are executed for matching selectors (before registration)',function(e){var a=c.createCallbacks();s.append(o).append(r).append(i).always("a, b",c.invokeCallbacks(a)),c.wait(1,function(){c.assertInvoked(a,1,1,0),e()})}),it('"Inserted" callbacks are executed for matching selectors (after registration)',function(e){var a=c.createCallbacks();s.always("a, b",c.invokeCallbacks(a)).append(o).append(r).append(i),c.wait(1,function(){c.assertInvoked(a,1,1,0),e()})}),it('"Removed" callbacks are executed for matching selectors',function(e){var a=c.createCallbacks();s.append(o).append(r).append(i).always("a, b",void 0,c.invokeCallbacks(a)),o.remove(),r.remove(),c.wait(1,function(){c.assertInvoked(a,1,1,0),e()})}),it("Callbacks are also executed for selectors matching children (deep) of mutated elements",function(e){var a=c.createCallbacks(),t=c.createCallbacks();s.always("a, b",c.invokeCallbacks(a),c.invokeCallbacks(t)).append("<a></a><a><b></b></a><a></a><b></b><div><a></a><a><b></b></a><b></b></div>"),c.wait(1,function(){c.assertInvoked(a,5,4,0),c.assertInvoked(t,0,0,0),s.html(""),c.wait(1,function(){c.assertInvoked(a,5,4,0),c.assertInvoked(t,5,4,0),e()})})}),it("Callbacks are not called multiple times for special cases (like wrap()) where the element is already in the Dom",function(e){var a=c.createCallbacks(),t=c.createCallbacks();s.append(o).always("a",c.invokeCallbacks(a),c.invokeCallbacks(t)),c.wait(1,function(){c.assertInvoked(a,1,0,0),c.assertInvoked(t,0,0,0),o.wrap("<div/>"),c.wait(1,function(){c.assertInvoked(a,2,0,0),c.assertInvoked(t,1,0,0),e()})})}),it("Callbacks are not called multiple times for special cases (like wrap() / unwrap()) where child nodes are also reported as mutated",function(e){var a=c.createCallbacks(),n=c.createCallbacks(),r=t("<span/>");s.always("a",c.invokeCallbacks(a),c.invokeCallbacks(n)).append(o),c.wait(1,function(){c.assertInvoked(a,1,0,0),c.assertInvoked(n,0,0,0),o.wrap(r),c.wait(1,function(){c.assertInvoked(a,2,0,0),c.assertInvoked(n,1,0,0),o.unwrap(),c.wait(1,function(){c.assertInvoked(a,3,0,0),c.assertInvoked(n,2,0,0),e()})})})}),it("Calling never() stops execution of all callbacks",function(e){var a=c.createCallbacks(),t=c.createCallbacks();s.always("a, b",c.invokeCallbacks(a),c.invokeCallbacks(t)).append(o).append(r).append(i),c.wait(1,function(){c.assertInvoked(a,1,1,0,"Pre-Never (Inserted)"),o.remove(),r.remove(),i.remove(),c.wait(1,function(){c.assertInvoked(t,1,1,0,"Pre-Never (Removed)"),s.never().append(o).append(r).append(i),c.wait(1,function(){c.assertInvoked(a,1,1,0,"Post-Never (Inserted)"),o.remove(),r.remove(),i.remove(),c.wait(1,function(){c.assertInvoked(t,1,1,0,"Post-Never (Removed)"),e()})})})})}),it("Calling never(selector) stops execution of matching callbacks",function(e){var a=c.createCallbacks(),t=c.createCallbacks();s.always("a, b",c.invokeCallbacks(a)).always("div",c.invokeCallbacks(t)).append(o).append(r).append(i),c.wait(1,function(){c.assertInvoked(a,1,1,0,"Pre-Never (A,B)"),c.assertInvoked(t,0,0,1,"Pre-Never (DIV)"),o.remove(),r.remove(),i.remove(),s.never("b,a").append(o).append(r).append(i),c.wait(1,function(){c.assertInvoked(a,1,1,0,"Post-Never (A,B)"),c.assertInvoked(t,0,0,2,"Post-Never (DIV)"),e()})})}),it("Calling never(selector, insertedCallback, removedCallback) stops execution of exact callback(s)",function(e){var a=c.createCallbacks(),t=c.createCallbacks(),n=c.createCallbacks(),l=c.invokeCallbacks(a),d=c.invokeCallbacks(t),v=c.invokeCallbacks(n);s.always("a",l).always("b",d).always("div",void 0,v).append(o).append(r).append(i),i.remove(),c.wait(1,function(){c.assertInvoked(a,1,0,0,"Pre-Never (A)"),c.assertInvoked(t,0,1,0,"Pre-Never (B)"),c.assertInvoked(n,0,0,1,"Pre-Never (DIV)"),o.remove(),r.remove(),s.never("a",l).append(o).append(r).append(i),i.remove(),c.wait(1,function(){c.assertInvoked(a,1,0,0,"Post-Never (A)"),c.assertInvoked(t,0,2,0,"Post-Never (B)"),c.assertInvoked(n,0,0,2,"Post-Never (DIV)"),o.remove(),r.remove(),s.never("div",void 0,v).append(o).append(r).append(i),i.remove(),c.wait(1,function(){c.assertInvoked(a,1,0,0,"Post-Never (A)"),c.assertInvoked(t,0,3,0,"Post-Never (B)"),c.assertInvoked(n,0,0,2,"Post-Never (DIV)"),e()})})})}),it('Adding a second "inserted" callback eligible for immediate execution does not trigger re-execution of the first one',function(e){var a=c.createCallbacks();s.append(o.attr("data-ab","")).append(r.attr("data-ab","")).append(i).always("a",c.invokeCallbacks(a)).always("[data-ab]",c.invokeCallbacks(a)),c.wait(1,function(){c.assertInvoked(a,2,1,0),e()})}),it("Issuing multiple additions / removals invokes registered callbacks in a reasonable amount of time",function(e){var a=1e3,t=0,o=0,r=function(){if(t+=(new Date).getTime()-o,0==a--)return n.isBelow(t,1e3),e();var r=s.find("a, em, strong, span, div"),i=0<r.length&&.5>Math.random()?function(){return r.first().remove()}:function(){return s.append("<"+["a","em","strong","span","div"][Math.round(4*Math.random())]+"/>")};o=(new Date).getTime(),i()};s.always("a, em, strong, span, div",r,r),o=(new Date).getTime(),r()})})}(jQuery,chai);
//# sourceMappingURL=tests.min.js.map