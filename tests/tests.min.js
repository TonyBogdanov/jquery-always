!function(e,a){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e,a=a&&a.hasOwnProperty("default")?a["default"]:a,function(e,a){var n,t,o,s,r,i=function(){function e(e){this.invoked=0,this.callback=e}return e.prototype.invoke=function(){this.callback.apply(this,arguments),this.invoked++},e.prototype.getInvoked=function(){return this.invoked},e}(),c=function(){function e(){}return e.createCallbacks=function(){return{a:new i(function(){}),b:new i(function(){}),div:new i(function(){})}},e.invokeCallbacks=function(e){return function(){e[this.tagName.toLowerCase()].invoke()}},e.assertInvoked=function(e,n,t,o,s){a.equal(e.a.getInvoked(),n,(s?s+": ":"")+"Callback #a must be invoked "+n+" time(s) total"),a.equal(e.b.getInvoked(),t,(s?s+": ":"")+"Callback #b must be invoked "+t+" time(s) total"),a.equal(e.div.getInvoked(),o,(s?s+": ":"")+"Callback #div must be invoked "+o+" time(s) total")},e.wait=function(a,n){0>=a?n():setTimeout(function(){e.wait(a-1,n)},1)},e}();beforeEach(function(){t=e("<div/>"),o=e("<a/>"),s=e("<b/>"),r=e("<div/>"),n=e(document.body),n.append(t)}),afterEach(function(){t.remove()}),describe("jQuery.Always",function(){it("Dependencies have resolved",function(){var e=typeof window.MutationObserver,n=typeof window.WebKitMutationObserver;a.isTrue("undefined"!==e||"undefined"!==n,"Browser must support mutation observer feature, typeof MutationObserver is "+e+", typeof WebKitMutationObserver is "+n)}),it("Plugin has registered",function(){a.isFunction(e.fn.always,"always() must be registered with jQuery"),a.isFunction(e.fn.never,"never() must be registered with jQuery")}),it('"Inserted" callbacks are executed for matching selectors (before registration)',function(e){var a=c.createCallbacks();t.append(o).append(s).append(r).always("a, b",c.invokeCallbacks(a)),c.wait(1,function(){c.assertInvoked(a,1,1,0),e()})}),it('"Inserted" callbacks are executed for matching selectors (after registration)',function(e){var a=c.createCallbacks();t.always("a, b",c.invokeCallbacks(a)).append(o).append(s).append(r),c.wait(1,function(){c.assertInvoked(a,1,1,0),e()})}),it('"Removed" callbacks are executed for matching selectors',function(e){var a=c.createCallbacks();t.append(o).append(s).append(r).always("a, b",void 0,c.invokeCallbacks(a)),o.remove(),s.remove(),c.wait(1,function(){c.assertInvoked(a,1,1,0),e()})}),it("Callbacks are also executed for selectors matching children (deep) of mutated elements",function(a){var n=c.createCallbacks(),i=c.createCallbacks(),l=e("<span/>"),d=e("<span/>"),v=e("<span/>");l.append(e("<span/>").append(o.clone()).append(e("<span/>").append(o.clone()))),d.append(e("<span/>").append(s.clone()).append(e("<span/>").append(s.clone()))),v.append(e("<span/>").append(r.clone()).append(e("<span/>").append(r.clone()))),t.always("a, b",c.invokeCallbacks(n),c.invokeCallbacks(i)).append(l).append(d).append(v),c.wait(1,function(){c.assertInvoked(n,2,2,0),c.assertInvoked(i,0,0,0),l.children().children().last().remove(),d.remove(),v.remove(),c.wait(1,function(){c.assertInvoked(n,2,2,0),c.assertInvoked(i,1,2,0),a()})})}),it("Callbacks are not called multiple times for special cases (like wrap() / unwrap()) where child nodes are also reported as mutated",function(a){var n=c.createCallbacks(),s=c.createCallbacks(),r=e("<span/>");t.always("a",c.invokeCallbacks(n),c.invokeCallbacks(s)).append(o),c.wait(1,function(){c.assertInvoked(n,1,0,0),c.assertInvoked(s,0,0,0),o.wrap(r),c.wait(1,function(){c.assertInvoked(n,2,0,0),c.assertInvoked(s,1,0,0),o.unwrap(),c.wait(1,function(){c.assertInvoked(n,3,0,0),c.assertInvoked(s,2,0,0),a()})})})}),it("Calling never() stops execution of all callbacks",function(e){var a=c.createCallbacks(),n=c.createCallbacks();t.always("a, b",c.invokeCallbacks(a),c.invokeCallbacks(n)).append(o).append(s).append(r),c.wait(1,function(){c.assertInvoked(a,1,1,0,"Pre-Never (Inserted)"),o.remove(),s.remove(),r.remove(),c.wait(1,function(){c.assertInvoked(n,1,1,0,"Pre-Never (Removed)"),t.never().append(o).append(s).append(r),c.wait(1,function(){c.assertInvoked(a,1,1,0,"Post-Never (Inserted)"),o.remove(),s.remove(),r.remove(),c.wait(1,function(){c.assertInvoked(n,1,1,0,"Post-Never (Removed)"),e()})})})})}),it("Calling never(selector) stops execution of matching callbacks",function(e){var a=c.createCallbacks(),n=c.createCallbacks();t.always("a, b",c.invokeCallbacks(a)).always("div",c.invokeCallbacks(n)).append(o).append(s).append(r),c.wait(1,function(){c.assertInvoked(a,1,1,0,"Pre-Never (A,B)"),c.assertInvoked(n,0,0,1,"Pre-Never (DIV)"),o.remove(),s.remove(),r.remove(),t.never("b,a").append(o).append(s).append(r),c.wait(1,function(){c.assertInvoked(a,1,1,0,"Post-Never (A,B)"),c.assertInvoked(n,0,0,2,"Post-Never (DIV)"),e()})})}),it("Calling never(selector, insertedCallback, removedCallback) stops execution of exact callback(s)",function(e){var a=c.createCallbacks(),n=c.createCallbacks(),i=c.createCallbacks(),l=c.invokeCallbacks(a),d=c.invokeCallbacks(n),v=c.invokeCallbacks(i);t.always("a",l).always("b",d).always("div",void 0,v).append(o).append(s).append(r),r.remove(),c.wait(1,function(){c.assertInvoked(a,1,0,0,"Pre-Never (A)"),c.assertInvoked(n,0,1,0,"Pre-Never (B)"),c.assertInvoked(i,0,0,1,"Pre-Never (DIV)"),o.remove(),s.remove(),t.never("a",l).append(o).append(s).append(r),r.remove(),c.wait(1,function(){c.assertInvoked(a,1,0,0,"Post-Never (A)"),c.assertInvoked(n,0,2,0,"Post-Never (B)"),c.assertInvoked(i,0,0,2,"Post-Never (DIV)"),o.remove(),s.remove(),t.never("div",void 0,v).append(o).append(s).append(r),r.remove(),c.wait(1,function(){c.assertInvoked(a,1,0,0,"Post-Never (A)"),c.assertInvoked(n,0,3,0,"Post-Never (B)"),c.assertInvoked(i,0,0,2,"Post-Never (DIV)"),e()})})})}),it('Adding a second "inserted" callback eligible for immediate execution does not trigger re-execution of the first one',function(e){var a=c.createCallbacks();t.append(o.attr("data-ab","")).append(s.attr("data-ab","")).append(r).always("a",c.invokeCallbacks(a)).always("[data-ab]",c.invokeCallbacks(a)),c.wait(1,function(){c.assertInvoked(a,2,1,0),e()})})})}(e,a.assert)}(jQuery,chai);
//# sourceMappingURL=tests.min.js.map